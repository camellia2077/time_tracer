## [v0.7.0] - 2026-02-23

### Added
* 新增 **内核加密与解密能力支持**，`tracer_core` 现已提供文件加密与解密链路（含单文件与目录批量场景）。
* 新增 **report-chart HTML 图表类型扩展**：`--chart-type line|bar|pie|heatmap-year|heatmap-month`，并补齐模板与离线 `echarts` 资产。
* 新增 **报告格式统一重构（多端一致性）收口（2026-02-28）** 记录，确认 `temp/refactor-reports.md` 的 Step 1~6 全部完成，Step 7 已取消。
* 新增六类固定样本（`day/month/week/year/recent/range`）采样与对账链路，落地 `scripts/tools/collect_report_markdown_cases.py` 与 `test/golden/report_markdown/v1/`。
* 新增默认 `verify` 门禁链路，接入 `scripts/tools/report_consistency_audit.py` 与 `scripts/tools/report_markdown_render_snapshot_check.py`。
* 新增 **Windows CI 构建矩阵（2026-02-26）**：`.github/workflows/windows-build-matrix.yml`。

### Changed/Refactor
* 重构 **报告文本契约与一致性规范**：
  * `docs/time_tracer/core/contracts/reporting/report_output_text_contract_v1.md`
  * `docs/time_tracer/core/contracts/reporting/report_data_consistency_spec_v1.md`
* 重构报告一致性门禁口径为“原始字节 + hash”对账，移除测试中的换行归一化路径：
  * `apps/tracer_core/src/infrastructure/tests/android_runtime/android_runtime_report_consistency_tests.cpp`
  * `apps/tracer_core/src/infrastructure/tests/report_formatter/report_formatter_parity_md_tests.cpp`
* 重构 **Core Crypto 安全等级与批量会话密钥策略（2026-02-26）**：
  * 默认安全等级调整为 `INTERACTIVE`，保留 `MODERATE` / `HIGH`。
  * 目录批量加密改为“一次 Argon2id + 多文件子密钥派生（BLAKE2b）”。
  * 目录批量解密按 `(kdf_id, ops_limit, mem_limit_kib, salt)` 复用主密钥。
* 重构 **Core Crypto 模块职责拆分（2026-02-26）**，将 `apps/tracer_core/src/infrastructure/crypto/file_crypto_service.cpp` 收敛为门面层，并拆分到：
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_format_compat.*`
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_directory_plan.*`
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_directory_orchestrator.*`
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_io.*`
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_progress_control.*`
  * `apps/tracer_core/src/infrastructure/crypto/internal/file_crypto_backend_engine.*`
* 重构 **Windows 构建链路（同步 `temp/refactor.md`）**：
  * 依赖与开关收敛：`TT_USE_BUNDLED_SQLITE`、`TT_TOML_HEADER_ONLY`、`TT_STATIC_MINGW_RUNTIME`、`TT_ENABLE_EXPERIMENTAL_LTO`。
  * Windows 下 SQLite 改为 amalgamation 源码构建，保留 `SQLite::SQLite3` / `SQLite3` 别名兼容。
  * `toml++` 改为 header-only，静态运行时链接参数生效。
* 重构 **Windows CLI report-chart HTML 导出职责**：命令层与表现层分离到：
  * `apps/tracer_cli/windows/src/api/cli/impl/presentation/report_chart_html_exporter.hpp`
  * `apps/tracer_cli/windows/src/api/cli/impl/presentation/report_chart_html_exporter.cpp`

### Fixed
* 修复 **Core Crypto ETA 稳定性（2026-02-26）**：
  * 当相邻 emit 速度样本不可用时，回退到“任务起点 -> 当前点”平均速度，降低 `speed=0` / `eta=0` 长驻问题。
  * Android JNI 加解密进度节流参数改为可配置，默认 `progress_min_interval=40ms`、`progress_min_bytes_delta=4KB`，支持 `TT_CRYPTO_PROGRESS_MIN_INTERVAL_MS` / `TT_CRYPTO_PROGRESS_MIN_BYTES_DELTA` 覆盖。
* 修复 **报表一致性问题（2026-02-25）**：
  * 解决同一 report 中 `All Activities` 与 `Project Breakdown` 分类路径不一致。
  * 根因为 `ProjectNameCache` 长生命周期陈旧映射；改为查询级快照刷新，并统一路径真相源。
  * 修复位置：`apps/tracer_core/src/infrastructure/reports/data/cache/project_name_cache.hpp`。
  * 回归用例：`apps/tracer_core/src/infrastructure/tests/android_runtime/android_runtime_business_regression_tests.cpp`。

### Deprecated/Removed
* 移除旧 app 命名入口（Breaking Change，2026-02-24）：
  * `apps/time_tracer` 重命名为 `apps/tracer_core`。
  * 下线旧入口 `--app time_tracer`，统一使用 `--app tracer_core`。

### Validation
* 同步验证 `python scripts/run.py verify --app tracer_core --quick` 通过。
* 同步验证 `python scripts/run.py post-change` 通过。

