## [v0.4.3.0] - 2026-01-20

### 新增功能 (Added)
* **跨月数据自动衔接 (Automatic Cross-Month Continuity)**:
    * 引入全新的 **`LogLinker`** 核心组件，实现了跨月日志的数据上下文自动关联。
    * 能够智能识别上月结尾，自动为本月第一天补全睡眠记录，不再需要手动复制跨月数据。
* **动态起床判定策略 (Dynamic Wake Detection)**:
    * 基于配置的 `wake_keywords` 动态决定睡眠/通宵判定逻辑。
    * 严格区分“通宵”与“跨月睡眠”场景，仅在缺少记录时触发补全。

### 技术改进/重构 (Changed/Refactor)
* **严格源文件校验 (Stricter Source Validation)**:
    * 升级 `TextValidator` 和 `StructureRules`，对文件结构增加严格约束。
    * **单文件单年份规则**: 每个日志文件仅限包含一个年份头。
    * **首日对齐规则**: 强制要求月度记录文件必须从当月 1 号开始。
* **流水线编排优化 (Pipeline Orchestration)**:
    * 在 `PipelineManager` 中集成 **`LogicLinkerStep`**，将其标准化地嵌入并行转换与输出验证之间。
* **批量查询逻辑下沉 (Logic Push-down)**:
    * 在核心接口 `IReportHandler` 中新增 **`run_period_queries`**，移除了 CLI 层对 `query period` 的显式循环。
    * 变更文件：`cli/impl/commands/query/query_command.cpp` → `core/reporting/report_handler.cpp`

### 修复 (Fixed)
* **导出模块方法签名匹配**: 修复了 `ReportHandler` 调用 `Exporter` 时的方法名混淆及参数类型错误。
* **架构分层优化**: 遵循 **"Core Orchestrates, Converter Implements"** 原则，将跨月逻辑封装在 `Converter` 模块内，确保核心层逻辑简单。
