## [v0.6.2] - 2026-02-22

### 新增功能 (Added)
* 新增 `apps/time_tracer/cmake/Packaging.cmake` 安装器前置校验，防止缺失可执行目标时误构建。
* 新增 `time_tracer` 套件联动构建逻辑，测试前可自动通过 `tracer_windows` 目录获取二进制文件。
* 新增 **IO Adapter** 源清单维护策略，确立 `modules/tracer_adapters_io/src/infrastructure/io/**` 目录实现路径。
* 新增 **SQLite** 存储模块相关的体检与冻结产物脚本（例如 `evaluate_indexes.py`）。
* 新增针对历史快照核心语义的回归测试用例 `android_runtime_factory_tests.cpp`。
* 新增 `ValidationIssueReporter` 测试组，覆盖错误落盘与行号定位输出的一致性检验。
* 新增 **Core** 的底层 C ABI 稳定入口 `time_tracer_core_c_api.h`，以及相关的回归测试集（包含 smoke 与 stability 测试）。
* 新增 **Core ABI** 契约级文档 `docs/time_tracer/core/contracts/c_abi.md`，及统计相关的重构规划文档。
* 新增 `IngestMode::kSingleTxtReplaceMonth` 单文件替换导入模式契约与相应的记录更新方法 `ReplaceMonthData`。
* 新增 **Core** 最新导入统计字段 `ImportStats.replaced_month`。
* 新增 **Domain** 层结构化的错误日志防腐抽象，建立 `ErrorRecord` 结构与拥有七个命名空间的 `error_codes.hpp` 错误代码库。
* 新增 **Diagnostics** 去重控制接口 `ClearDiagnosticsDedup()`，以及获取运行时诊断日志路径的 `GetCurrentRunErrorLogPath()` 能力。

### 技术改进/重构 (Changed/Refactor)
* 重构 **IO Adapter**：完成阶段性向外剥离，全局统一配置，建立严格禁止反向依赖的隔离链接边界。
* 重构 **层级存储模块**：确立查询优先策略，统一使用 `_` 作为引擎内部路径分隔符，将界面连接符分离到展示层配置替代。
* 重构 **SQLite**：预计算落库以 `_` 隔离的层级路径，确立写入行为全部收口至 `ON CONFLICT DO UPDATE`（UPSERT），并全面启用外键限制保障机制稳定性。
* 重构 **Validation** 输出层级：隔离收回 **Domain** 直接介入命令行的文本输出特权，统一改由专属的 **Android** 与 **Windows** 环境层执行日志承接及下发渲染。
* 重构 **数据校验与缺陷定位** 表现格式：结构与逻辑校验均优先使用携带完整文件路径与行号的格式（`source_id:line`）进行渲染报错，以支持 IDE 的跳转追踪解析。
* 重构 **数据统计语义** 解耦：解绑跨端的界面表现层计算行为，完全通过 **Core** 输出单向结构化的数据链路闭环流转，使得界面展示无需重计均值与周期指标。
* 重构 **核心调用方式** 的各类依赖环境配置：**Android UI** 侧统一启用新定义协议集 `tracer_core_runtime_*` 对接引擎底层；**Windows CLI** 侧转变为轻量薄壳化，改为动态加载加载库 `time_tracer_core.dll` 执行内存态驱动。
* 重构 **Core C ABI** 全局输出池符号控制：彻底剔除原有以 `tt_*` 为前缀指代的调用组合名称，规范纳入高识别度的 `tracer_core_*` 体系内，并全面剥除符号兼容映射。
* 重构 **日历数据导入事务** 后置补全补库模式：设定由 `single_txt_replace_month` 模式执行时稳定清空当期内容，并能妥当利用库内记录，完成关于越跨首日尾迹的数据回填写库自动补回关联。
* 重构 **错误保留与排查反馈** 回归机制：确保在启动指令 `EmitAndBuffer` 的防重会话提醒；**Android UI** 侧会在初始化阶段获取 `error_log_path` 后开始定期清理逾期的报告日志，稳定管理上限为 50 卷。
* 优化解析月份标位符检验标准：全面废除只支持年标识的单文件隐性容错容许判定，从源头增加强制查验并需符合明确包含年代和月份双重 `mMM` 的定位校验禁令门槛。
* 优化单条与批量汇总型日报数据分类物理落地结构：所有使用输出指示如调用指令 `export day` 等建立产生的日态表均一致按照所属月份结构级 `day/YYYY/MM/YYYY-MM-DD.<ext>` 作标准归档。
* 优化构建中间路径极值告警机制：使用简装格式全盘更替在兼容特性的编译产物为缩略微小结构 `ttc` 等名称；以根治化规避存在跨段操作引发如由最高限定名称超限导致的提示报错 `CMAKE_OBJECT_PATH_MAX` 事件。
* 同步重构修正了多处拥有核心特设配置档组 `CMakeLists.txt`。

### 修复 (Fixed)
* 修复“节点名跨变更”易触发的历史语义连带崩溃危险问题：弥补向过去进行回溯牵连改换的修改漏洞，修复通过只读取快照字段 `project_path_snapshot` 作为固定留存原则对节点实现检索兜底保障。
* 修复 **Windows CLI** 在各宿主间构建配置库 `build_fast.sh` 与 `build.sh` 的相关缺失漏网异常：扩容包含填补诸如命令符 `py -3` / `python3` 等对齐运行解析终端兼容问题；修复对于根结目标指向 `REPO_ROOT` 时的位移误差缺失等短板处。
* 修复在“单月数据替换导入模式”处于文件内容处于没有任何标日数据文字信息的意外场景下依然拒绝执行下发前段排除清除记录要求的状态遗落不周缺陷事件故障。

### 弃用/删除 (Deprecated/Removed)
* 删除采用前头 `tt_*` 为老一代底层架构封装的所有接入对接群接口遗迹及其附庸全向关联旧桩维护支援容退代码指令包段作清仓。
* 弃用单靠缺残形式不全的时间位符比如仅能定位包含带有年标识（类似独立字符 `yYYYY` 位段）而却不提供跟随月份指引导致基于头段推断法失败的所有老容隐推容算法。
* 弃用 **Domain** 领域内本包含不受控约束越界权限往交互窗口打印抛示输出业务日志设计的黑箱权限支持设计包和附有功能 `validator_utils.cpp` 提供附带实现逻辑的方法库集代码全部根处除掉。

[v0.6.2]: https://github.com/camellia2077/time_tracer_cpp/compare/v0.6.1...v0.6.2
