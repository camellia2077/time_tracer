## [v0.5.5] - 2026-02-05
### Summary
新增 `tree` 命令用于可视化项目结构，优化静态分析构建环境（PCH 可配置开关），并完成大规模架构重构（构建系统模块化、Repository 模式、CLI 框架增强）以提升代码质量与可维护性。

## Added
* **项目树展示**：新增 `tree` 命令，支持以树形结构展示项目层级。
* **项目路径过滤**：支持指定 `PROJECT_PATH` 参数（如 `tree study`、`tree study_math`）只展示特定项目子树。
* **层级控制**：新增 `-l/--level` 参数控制树展示深度。
* **根列举**：新增 `-r/--roots` 参数列出所有顶层根项目。
* **命令帮助优化**：CLI 支持 `tree --help`（及其他命令）只显示单命令帮助而非全局帮助。

## Changed/Refactor
* **构建系统模块化**：彻底重构 CMake 配置，移除单体 `SourceFileCollection.cmake`，采用 Modern CMake 标准，为每个模块（domain, infra, application, cli, reports）建立独立的 `CMakeLists.txt`。
* **Repository 模式**：引入数据访问层，定义 `IProjectRepository` 接口并实现 `SqliteProjectRepository`，解耦业务逻辑与 SQL 实现。
* **CLI 框架清理**：将 `framework/io/console_input` 移至 `impl/io/`，确保 `framework/` 严格只包含命令解析核心（`CommandParser`、`ArgDef`、`CommandValidator` 等），与业务无关的通用基础设施。
* **CLI 框架增强**：
    - `CommandParser` 新增 `GetPositionalArgs(std::span<const ArgDef>)` 重载，根据参数定义智能跳过 Option 类型的值（如 `-l 2` 中的 `2`），正确提取位置参数。
    - 修复 `tree -l 2` 将 `2` 误识别为项目路径的问题。
* **分层架构优化**：
    - 将 `ReportFileManager` 从 Application 层下沉至 Infrastructure 层，解决循环依赖问题。
    - 重构 `ProjectTreeViewer`：Application 层只返回数据（`GetRoots()` → `std::vector<std::string>`，`GetTree()` → `std::optional<std::vector<ProjectTreeNode>>`），移除所有 `std::cout` 输出。
    - 新增 `TreeFormatter`（CLI 层）负责树形输出格式化，遵循"Application 层返回数据，CLI 层负责展示"的分层原则。
* **PCH 条件编译**：在 **`TargetSetup.cmake`** 中实现 `ENABLE_PCH` 开关，支持在静态分析等场景下禁用预编译头以获得更完备的头文件检查。
* **Main程序拆分**：将臃肿的 **`main_cli.cpp`** (>200行) 重构为三部分：
    - **`ConsoleHelper`** (`cli/impl/utils/`): 负责 Windows 控制台 UTF-8 设置与参数获取。
    - **`AppRunner`** (`cli/impl/app/`): 封装应用启动逻辑与环境校验。
    - **`main_cli.cpp`**: 仅保留极简的入口异常捕获。
* **ANSI 颜色重构**：将 ANSI 颜色定义从宏（如 `RED_COLOR`）迁移至命名空间常量（`time_tracer::common::colors`），提升代码质量与可维护性。

## Fixed
* **链接器问题**：修复静态库 (`time_tracker_cli_lib`) 中未引用符号（CLI 命令注册对象）被链接器丢弃导致命令丢失的问题（使用 `-Wl,--whole-archive`）。
* **Win32 DLL 缺失**：修复 MinGW/Clang 环境下 `libgcc`、`libstdc++` 等运行时库未完整复制导致的启动失败问题。
* **编译警告**：修复 `EscapeLike` 未使用的编译警告。
* **缺失头文件**：修复 **`arg_definitions.hpp`** 中因依赖 PCH 而缺失的 `#include <map>`。
* **Windows 头文件冲突**：修复 **`main_cli.cpp`** 中 `windows.h` 与 `shellapi.h` 的包含顺序问题。