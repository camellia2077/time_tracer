## [v0.5.8] - 2026-02-12

### Added
* 新增 **DllCompatibilityError**，用于 `DLL` ABI 不兼容场景的显式错误链。
* 新增 CLI 退出码 `kDllCompatibilityError = 10`，并同步 `Python` 测试退出码映射。
* 新增 **RangeQuerierBase**，复用区间类查询共享流程（`actual_days`、day flag 统计、project tree 物化）。
* 新增 `ValidateRangeReportDataView(...)`，支持对 `TtRangeReportDataV1` 进行直接校验。
* 新增可执行测试输出增强：默认 `--show-output all`，并写入 `py_output/output.log`。

### Changed/Refactor
* 优化（2026-02-12）`EXE` 体积：在 `apps/time_tracer/src/infrastructure/reports/data/queriers/base_querier.hpp` 和 `apps/time_tracer/src/api/cli/impl/commands/query/data_query_repository.cpp` 中移除 `std::format`，改为轻量字符串拼接。
* 优化（2026-02-12）解析链路：在 `apps/time_tracer/src/application/parser/text_parser.cpp` 用手写字符检查替换正则事件解析（`HHMM`、year/day marker）。
* 优化（2026-02-12）配置校验：在 `apps/time_tracer/src/infrastructure/config/validator/reports/strategies/base_strategy.cpp` 用 `IsHexDigit` 替换 `#RRGGBB` 正则校验。
* 重构（2026-02-11）**PluginValidator** 启动检查：从“文件存在”升级为“文件存在 + ABI 兼容性校验”，并对 `tt_getFormatterAbiInfo` 与 `TT_FORMATTER_ABI_VERSION_CURRENT` 做一致性验证。
* 重构（2026-02-11）插件绑定清单：统一 `(report kind, format, plugin DLL)` 映射，复用到注册与启动校验，消除重复硬编码。
* 重构（2026-02-11）命令分发：将 `query`/`export` 从长 `if/else` 改为表驱动处理，降低扩展回归风险。
* 重构（2026-02-10）`Plugin DLL` ABI 边界：在 `apps/time_tracer/src/infrastructure/reports/` 完成 TOML 文本传输到 C ABI payload（`TtFormatterConfig`、`TtReportDataView`）的切换。
* 重构（2026-02-10）桥接命名：将 `*_toml_bridge` 统一为 `*_config_bridge_v1`，对齐 ABI 语义。
* 优化（2026-02-10）运行时与体积：在插件/报告共享路径减少 `std::format`、减少 `stringstream`/`iostream` 重格式化路径，并在可行处扩展 `NO_STDCXXEXP`。
* 优化（2026-02-10）区间报告热路径：在 month/range 系列插件中支持 `FormatReportFromView(const TtRangeReportDataV1&)`，避免 `BuildRangeReportDataFromView` 后的二次 C++ 重建。

### Fixed
* 修复 `query recent/week/year` 与 `export` 相关的 `Unsupported report_data_kind` 失败。
* 修复 `DLL` 不兼容场景下的“误成功”返回，改为显式兼容性错误链与退出码。
* 修复关键配置/报告路径中的字符串生命周期风险，避免 `string_view` 在移动后失效。

### Deprecated/Removed
* 移除旧版格式化器导出与兼容路径：`CreateFormatter`/`DestroyFormatter` 及相关 legacy ABI 变体。
* 移除 **DllFormatterWrapper** 的 legacy fallback，仅保留 `tt_*` ABI 合约（`tt_createFormatter`、`tt_destroyFormatter`、`tt_formatReport`、`tt_getFormatterAbiInfo`）。
* 移除插件 `DLL` ABI 边界上的 TOML 文本传输，改为稳定 C ABI 结构体传输。
* 移除 **ReportGenerator** 透传层，改为 **ReportHandler** 直接依赖 `IReportQueryService`。
