# Query 功能建议（按优先级）

1. 统计类输出（summary）
   - 按日期范围统计总时长、学习/睡眠/运动等聚合时间。
   - 输出 Top N 项目/活动（按耗时排序）。
2. 项目路径模糊匹配增强
   - 支持前缀/包含/正则三种匹配模式，并在命令上显式选择。
3. 备注/活动名高级匹配
   - 支持 AND/OR 组合、排除关键词（NOT）。
   - 支持大小写忽略与全/半角统一。
4. 时间段过滤
   - 支持按一天内时段筛选（如 00:00-06:00 的活动）。
5. 异常与习惯检测
   - 连续通宵天数、连续未运动天数、连续 status=0 天数。
6. 输出格式增强
   - 支持输出 JSON/CSV，便于二次分析或可视化。
7. 与报表联动
   - 查询结果可直接导出日/周/月报（基于过滤结果）。


P0（管理工具必须有）

组合查询 + 结果统计：输出命中日期数、总时长、平均时长；可按天/月聚合。
查询结果导出：--format csv|json|md，方便二次分析。
查询保存/复用：--save name、--load name，保存常用筛选条件。
P1（提高实用性）

活动维度汇总：按 project_path 统计时长/占比（支持层级汇总）。
关键词统计：按 remark 关键词分类计数/时长（如“加班”“锻炼”）。
异常检测：如当天总时长 > 24h、连续缺失 getup_time、长期无 exercise。
P2（体验和扩展）

模糊/正则搜索 + 忽略大小写：--regex、--ignore-case。
趋势对比：环比/同比（本月 vs 上月、本周 vs 上周）。
快速清单：最近 N 天、最长睡眠日、最晚起床日、最长专注日等。
P3（更高级）

标签/自定义分类：允许用户给活动加标签，然后按标签统计。
导出图表数据：直接输出为 heatmap/趋势图数据格式。